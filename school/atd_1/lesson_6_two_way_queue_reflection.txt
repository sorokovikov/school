Пред- и постусловия совпадают. Запрос (кроме size - он дублируется в двунаправленной очереди) и команды тоже.